<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Payment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.cdnfonts.com/css/ge-ss-unique" rel="stylesheet" />
    <style>
      body,
      * {
        font-family: "GE SS Unique", Arial, sans-serif !important;
      }
    </style>
  </head>
  <body class="bg-gradient-to-b from-gray-100 to-violet-200 min-h-screen">
    <!-- Navbar -->
    
    <!-- Navbar -->
    <div
      class="w-full bg-white shadow-[0_4px_24px_0_rgba(80,80,180,0.10)] fixed top-0 left-0 right-0 z-50"
      style="margin-top: 0"
    >
      <nav
        class="glass py-3 shadow-none w-full max-w-6xl mx-auto bg-white"
        style="text-align: center"
      >
        <div class="flex items-center justify-between w-full">
          <!-- Logo and Site Name (far left) -->
          <div class="flex items-center gap-3 min-w-0">
            <img
              src="images/logo-removebg-preview.png"
              alt="SPATRAK Logo"
              class="h-12 w-12 object-contain"
              onerror="this.src='https://via.placeholder.com/48'"
            />
            <span
              class="text-2xl font-bold text-violet-900 tracking-wide whitespace-nowrap"
              >SPATRAK</span
            >
          </div>
          <!-- Desktop Centered Navigation Links -->
          <div id="nav-menu" class="hidden md:flex gap-6 items-center mx-auto">
            <a
              href="index.html"
              class="text-violet-900 font-semibold hover:text-violet-700 hover:bg-violet-100 px-3 py-2 rounded transition"
              >Home</a
            >

            <a
              href="verify.html"
              class="text-violet-900 font-semibold hover:text-violet-700 hover:bg-violet-100 px-3 py-2 rounded transition"
              >Verify</a
            >

        
            <a
              href="terms.html"
              class="text-violet-900 font-semibold hover:text-violet-700 hover:bg-violet-100 px-3 py-2 rounded transition"
              >Conditions</a
            >
          </div>
          <!-- Hamburger for mobile (far right) -->
          <div class="md:hidden flex items-center ml-auto">
            <button id="nav-toggle" class="text-violet-900 focus:outline-none">
              <svg
                class="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </button>
          </div>
          <!-- Desktop User Avatar Dropdown (far right) -->
          <div class="relative group ml-4 hidden md:block">
            <button
              id="avatar-dropdown-btn"
              class="focus:outline-none flex items-center"
            >
              <img
                src="images/Sample_User_Icon.png"
                alt="User"
                class="h-10 w-10 rounded-full border-2 border-violet-300 shadow-sm"
                onerror="this.src='images/Sample_User_Icon.png'"
              />
              <svg
                class="w-4 h-4 ml-2 text-violet-900"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
            <div
              id="avatar-dropdown-menu"
              class="absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible group-focus:opacity-100 group-focus:visible transition-opacity duration-200 z-50"
            >
              <!-- Menu items will be populated by JavaScript -->
            </div>
          </div>
        </div>
        <!-- Mobile Menu: links + user dropdown inside -->
        <div id="mobile-menu" class="hidden flex-col gap-2 mt-4">
          <a
            href="index.html"
            class="block text-violet-900 font-semibold hover:text-violet-700 hover:bg-violet-100 px-3 py-2 rounded transition"
            >Home</a
          >

          <a
            href="verify.html"
            class="block text-violet-900 font-semibold hover:text-violet-700 hover:bg-violet-100 px-3 py-2 rounded transition"
            >Verify</a
          >

        
          <a
            href="terms.html"
            class="block text-violet-900 font-semibold hover:text-violet-700 hover:bg-violet-100 px-3 py-2 rounded transition"
            >Terms and Conditions</a
          >
          <div class="border-t border-violet-100 my-2"></div>
          <div id="mobile-user-section">
            <!-- Mobile user section will be populated by JavaScript -->
          </div>
        </div>
      </nav>
    </div>

    <!-- Logo -->
    <div class="flex items-center p-6">
      <span class="text-violet-900 text-3xl font-bold">verify</span
      ><span class="text-gray-700 text-3xl font-light">diploma</span>
    </div>
    <div class="flex flex-col justify-center items-center my-4">
      <!-- Payment Box -->
      <div class="bg-white rounded-lg shadow-lg p-8 w-full max-w-md mb-2">
        <h2 class="text-violet-900 text-xl font-bold mb-2">Payment</h2>
        <p class="mb-4 text-gray-700">Summary of your order</p>
        <div class="bg-gray-100 rounded p-4 mb-4">
          <div class="flex justify-between items-center mb-2">
            <span>Apply French degree credit</span>
            <input
              type="checkbox"
              class="accent-violet-900 w-7 h-7 border border-gray-400 rounded bg-white"
            />
          </div>
          <div class="flex justify-between items-center">
            <span>Remaining credits</span>
            <input
              type="checkbox"
              class="accent-violet-900 w-7 h-7 border border-gray-400 rounded bg-white"
            />
          </div>
        </div>
        <label
          for="packageSelect"
          class="block text-violet-900 text-lg font-bold mb-2"
          >Select Package</label
        >
        <select
          id="packageSelect"
          class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-400 mb-4"
        >
          <option value="25">Single Check €30.99</option>
          <option value="50">10 Pack €258</option>
          <option value="100">25 Pack €643</option>
        </select>
        <div class="flex items-center mb-4">
          <input id="terms" type="checkbox" class="accent-violet-900 mr-2" />
          <label for="terms" class="text-sm"
            >I accept the
            <a href="#" class="text-violet-900 underline"
              >Terms and Conditions</a
            ></label
          >
        </div>
        <button
          id="nextBtn"
          class="w-full bg-violet-900 text-white py-2 rounded font-semibold text-lg transition-colors disabled:opacity-50"
          disabled
        >
          Next
        </button>
      </div>
    </div>
    <!-- Footer -->
    <footer
      class="w-full py-16 bg-[url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2072&q=80')] bg-cover bg-center relative"
    >
      <!-- Overlay -->
      <div
        class="absolute inset-0 bg-gradient-to-br from-violet-300/55 to-violet-950/95 backdrop-blur-sm"
      ></div>

      <!-- Content -->
      <div class="container mx-auto px-6 relative z-10">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-12 max-w-7xl mx-auto">
          <!-- Logo & About -->
          <div class="flex flex-col gap-6">
            <div class="flex items-center gap-3 group">
              <div class="relative">
                <img
                  src="././images/logo-removebg-preview.png"
                  alt="SPATRAK Logo"
                  class="h-32 w-32 object-contain transform group-hover:rotate-12 transition duration-300"
                />
                <div
                  class="absolute -inset-2 bg-violet-600/30 rounded-full blur-md opacity-0 group-hover:opacity-100 transition duration-500"
                ></div>
              </div>
              <span class="text-2xl font-bold text-white tracking-wide">
                SPATRAK
              </span>
            </div>

            <p class="text-violet-200/80 text-sm">
              Leading platform for secure and smart document and certificate
              verification.
            </p>
          </div>

          <!-- Quick Links -->
          <div class="flex flex-col gap-4">
            <h3
              class="text-lg font-semibold text-white mb-2 border-b border-violet-400/30 pb-2"
            >
              Quick Links
            </h3>
            <a href="index.html" class="footer-link">Home</a>
            <a href="././admin-dashboard/dashboard.html" class="footer-link"
              >Dashboard</a
            >
            <a href="state_request.html" class="footer-link">Requests</a>
            <a href="payment.html" class="footer-link">Pricing </a>
            <a href="#contact" class="footer-link">Contact</a>
          </div>

          <!-- Services -->
          <div class="flex flex-col gap-4">
            <h3
              class="text-lg font-semibold text-white mb-2 border-b border-violet-400/30 pb-2"
            >
              Our Services
            </h3>
            <a href="#" class="footer-link">Employer Requests</a>
            <a href="#" class="footer-link">Digital Reports</a>
            <a href="#" class="footer-link">Certificate Validation</a>
            <a href="#" class="footer-link">Document Verification</a>
          </div>

          <!-- Contact & Newsletter -->
          <div class="flex flex-col gap-6">
            <div class="flex flex-col gap-4">
              <h3
                class="text-lg font-semibold text-white mb-2 border-b border-violet-400/30 pb-2"
              >
                Contact Us
              </h3>

              <div class="flex items-start gap-3">
                <!-- <i class="fas fa-envelope text-violet-300 mt-1"></i> -->
                <a href="mailto:info@spatrak.com" class="footer-link"
                  >info@spatrak.com</a
                >
              </div>
              <div class="flex items-start gap-3">
                <!-- <i class="fas fa-envelope text-violet-300 mt-1"></i> -->
                <a href="mailto:support@spatrak.com" class="footer-link"
                  >support@spatrak.com</a
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Divider -->
        <div class="border-t border-violet-700/50 my-8"></div>

        <!-- Copyright -->
        <div
          class="flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-violet-300/80"
        >
          <div>
            &copy; 2025 <span class="text-white font-medium">SPATRAK</span>. All
            rights reserved.
          </div>
          <div class="flex gap-6">
            <a href="#" class="hover:text-white transition duration-200"
              >Privacy Policy</a
            >
            <a href="#" class="hover:text-white transition duration-200"
              >Terms of Service</a
            >
            <a href="#" class="hover:text-white transition duration-200"
              >Cookies</a
            >
          </div>
        </div>
      </div>
    </footer>
    <script>
      // تفعيل زر Next فقط عند الموافقة على الشروط
      const terms = document.getElementById("terms");
      const nextBtn = document.getElementById("nextBtn");
      terms.addEventListener("change", function () {
        nextBtn.disabled = !this.checked;
      });
      fetch("./navbar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("navbar-container").innerHTML = data;
          // Initialize navbar functionality
          loadNavbar();
        });
      fetch("footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footer-container").innerHTML = data;
        });
    </script>
  </body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    console.log("DOM fully loaded");

    // Check for token and user role in session storage
    const token = sessionStorage.getItem("authToken");
    const userRole = sessionStorage.getItem("userRole");
    const isLoggedIn = !!token;
    const isAdmin = userRole === "admin";

    console.log("Login Status:", isLoggedIn);
    console.log("User Role:", userRole);
    console.log("Is Admin:", isAdmin);

    // Get dropdown elements
    const avatarDropdownBtn = document.getElementById("avatar-dropdown-btn");
    const avatarDropdownMenu = document.getElementById("avatar-dropdown-menu");
    const mobileUserSection = document.getElementById("mobile-user-section");
    const navToggle = document.getElementById("nav-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    const desktopDashboardLink = document.getElementById(
      "desktop-dashboard-link"
    );
    const mobileDashboardLink = document.getElementById(
      "mobile-dashboard-link"
    );

    // Function to handle Dashboard visibility
    function handleDashboardVisibility() {
      if (isAdmin) {
        // Show Dashboard for admin
        if (desktopDashboardLink)
          desktopDashboardLink.classList.remove("hidden");
        if (mobileDashboardLink) mobileDashboardLink.classList.remove("hidden");
      } else {
        // Hide Dashboard for non-admin users
        if (desktopDashboardLink) desktopDashboardLink.classList.add("hidden");
        if (mobileDashboardLink) mobileDashboardLink.classList.add("hidden");
      }
    }

    // Function to populate dropdown menu based on login status
    function updateDropdownMenus() {
      // Desktop dropdown
      if (isLoggedIn) {
        avatarDropdownMenu.innerHTML = `
          <a href="admin-dashboard/profile.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Profile</a>
          ${
            isAdmin
              ? '<a href="admin-dashboard/dashboard.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Dashboard</a>'
              : ""
          }
          <a href="#" id="sign-out-btn" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Sign out</a>
        `;
      } else {
        avatarDropdownMenu.innerHTML = `
          <a href="login.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Login</a>
          <a href="register.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Register</a>
        `;
      }

      // Mobile menu user section
      if (isLoggedIn) {
        mobileUserSection.innerHTML = `
          <div class="flex items-center gap-2 px-3 py-2">
            <img
              src="images/Sample_User_Icon.png"
              alt="User"
              class="h-8 w-8 rounded-full border-2 border-violet-300 shadow-sm"
            />
            <span class="text-violet-900 font-semibold">User</span>
          </div>
          <a href="admin-dashboard/profile.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Profile</a>
          ${
            isAdmin
              ? '<a href="admin-dashboard/dashboard.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Dashboard</a>'
              : ""
          }
          <a href="#" id="mobile-sign-out-btn" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Sign out</a>
        `;
      } else {
        mobileUserSection.innerHTML = `
          <a href="login.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Login</a>
          <a href="register.html" class="block px-4 py-2 text-violet-900 hover:bg-violet-50">Register</a>
        `;
      }

      // Add sign out functionality if logged in
      if (isLoggedIn) {
        const signOutBtn = document.getElementById("sign-out-btn");
        const mobileSignOutBtn = document.getElementById("mobile-sign-out-btn");

        if (signOutBtn) {
          signOutBtn.addEventListener("click", function (e) {
            e.preventDefault();
            sessionStorage.removeItem("authToken");
            sessionStorage.removeItem("IdUser");
            sessionStorage.removeItem("password");
            sessionStorage.removeItem("userRole");
            window.location.href = "index.html";
          });
        }

        if (mobileSignOutBtn) {
          mobileSignOutBtn.addEventListener("click", function (e) {
            e.preventDefault();
            sessionStorage.removeItem("authToken");
            sessionStorage.removeItem("IdUser");
            sessionStorage.removeItem("password");
            sessionStorage.removeItem("userRole");
            window.location.href = "index.html";
          });
        }
      }
    }

    // Initialize menus and handle Dashboard visibility
    updateDropdownMenus();
    handleDashboardVisibility();

    // Toggle dropdown menu on click (for better mobile UX)
    if (avatarDropdownBtn && avatarDropdownMenu) {
      avatarDropdownBtn.addEventListener("click", function () {
        const isVisible = avatarDropdownMenu.classList.contains("opacity-100");

        if (isVisible) {
          avatarDropdownMenu.classList.remove("opacity-100", "visible");
          avatarDropdownMenu.classList.add("opacity-0", "invisible");
        } else {
          avatarDropdownMenu.classList.remove("opacity-0", "invisible");
          avatarDropdownMenu.classList.add("opacity-100", "visible");
        }
      });
    }

    // Close dropdown when clicking outside
    document.addEventListener("click", function (e) {
      if (
        avatarDropdownMenu &&
        avatarDropdownBtn &&
        !avatarDropdownMenu.contains(e.target) &&
        !avatarDropdownBtn.contains(e.target)
      ) {
        avatarDropdownMenu.classList.remove("opacity-100", "visible");
        avatarDropdownMenu.classList.add("opacity-0", "invisible");
      }
    });

    // Mobile menu toggle functionality
    if (navToggle && mobileMenu) {
      function toggleMobileMenu() {
        const isHidden = mobileMenu.classList.contains("hidden");

        if (isHidden) {
          mobileMenu.classList.remove("hidden");
          setTimeout(() => {
            mobileMenu.style.opacity = "1";
            mobileMenu.style.maxHeight = mobileMenu.scrollHeight + "px";
          }, 10);

          navToggle.innerHTML = `
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>`;
        } else {
          mobileMenu.style.opacity = "0";
          mobileMenu.style.maxHeight = "0";
          setTimeout(() => {
            mobileMenu.classList.add("hidden");
          }, 300);

          navToggle.innerHTML = `
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>`;
        }
      }

      navToggle.addEventListener("click", function (e) {
        e.stopPropagation();
        e.preventDefault();
        toggleMobileMenu();
      });
    }

    // Contact Form Submission
    const contactForm = document.getElementById("contact-form");
    if (contactForm) {
      contactForm.addEventListener("submit", async function (e) {
        e.preventDefault(); // Prevent default form submission

        const name = document.querySelector(
          '#contact-form input[name="name"]'
        ).value;
        const email = document.querySelector(
          '#contact-form input[name="email"]'
        ).value;
        const messageText = document.querySelector(
          '#contact-form textarea[name="message"]'
        ).value;

        const myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");

        const raw = JSON.stringify({
          name: name,
          email: email,
          messageText: messageText,
        });

        const requestOptions = {
          method: "POST",
          headers: myHeaders,
          body: raw,
          redirect: "follow",
        };

        // Basic UI feedback: Disable button and show loading
        const submitButton = contactForm.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.textContent;
        submitButton.disabled = true;
        submitButton.textContent = "Sending...";

        try {
          const response = await fetch(
            "https://spatrak.com/api/requests/contact",
            requestOptions
          );
          const result = await response.text(); // Or response.json() if your API returns JSON
          console.log(result);

          if (response.ok) {
            // Success feedback
            alert("Message sent successfully!");
            contactForm.reset(); // Clear the form
          } else {
            // Error feedback based on response status
            alert(
              `Failed to send message. Status: ${response.status}. Response: ${result}`
            );
          }
        } catch (error) {
          console.error(error);
          // Network error feedback
          alert(
            "An error occurred while sending your message. Please try again."
          );
        } finally {
          // Restore button state
          submitButton.disabled = false;
          submitButton.textContent = originalButtonText;
        }
      });
    }
  });
</script>
